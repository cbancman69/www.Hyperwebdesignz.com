<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Ride With Ree â€” Home</title>
  <meta name="description" content="Book your ride with Ride With Ree. Professional, reliable transportation at your service. Scan our QR code to schedule your journey today." />
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;600;800&family=Great+Vibes&display=swap" rel="stylesheet">
  <style>
    :root{--bg-from:#A8E0E8;--bg-via:#B0E8F0;--bg-to:#C0F0F8;--accent:#a855f7;--accent-dark:#7b2ce0}
    html,body{height:100%;margin:0;font-family:Inter,system-ui,Arial;background:linear-gradient(180deg,var(--bg-from),var(--bg-via),var(--bg-to));color:#062324}
    .wrap{min-height:100vh;display:flex;align-items:center;justify-content:center;padding:28px;position:relative;overflow:hidden}
    .card{width:100%;max-width:740px;background:transparent;border-radius:18px;padding:28px;display:flex;flex-direction:column;align-items:center;gap:12px}
    h1{font-family:'Great Vibes',cursive;font-size:56px;color:var(--accent);margin:0;text-align:center}
    .tag{color:#334;opacity:0.8;margin:0 0 18px 0;font-weight:300}
    .qr-frame{background:linear-gradient(180deg,#7b2ce0,#9b00ff);padding:3px;border-radius:26px}
    .qr-inner{background:#0f1d32;padding:18px;border-radius:22px;display:flex;flex-direction:column;align-items:center}
    .schedule{display:flex;align-items:center;gap:8px;color:#e7def9;margin-bottom:12px}
    .qr-img{width:256px;height:256px;border-radius:12px;display:block}
    .cta-row{display:flex;gap:10px;margin-top:14px;width:100%;max-width:520px}
    .btn{flex:1;padding:10px 12px;border-radius:10px;border:0;background:linear-gradient(90deg,var(--accent),#e89bff);color:#fff;font-weight:700;cursor:pointer}
    .btn.ghost{background:#fff;color:var(--accent-dark);box-shadow:0 6px 18px rgba(11,22,60,0.06)}
    .small{font-size:13px}
    .accent-line{height:6px;width:120px;border-radius:999px;background:linear-gradient(90deg,#d7a6ff,#a855f7);margin-top:18px}
    /* popup */
    .backdrop{position:fixed;inset:0;background:rgba(0,0,0,0.6);display:flex;align-items:center;justify-content:center}
    .popup{background:linear-gradient(180deg,#0f1d32,#1a2744);padding:20px;border-radius:16px;color:#fff;width:92%;max-width:360px}
    .popup h3{margin:6px 0 4px 0}
    .muted{color:#9fb}
    /* ambient glows */
    .glow{position:absolute;border-radius:50%;filter:blur(60px);opacity:0.4}
    .g1{width:420px;height:420px;left:3%;top:6%;background:radial-gradient(circle,#c7a0ff33,#9b00ff11)}
    .g2{width:320px;height:320px;right:6%;bottom:8%;background:radial-gradient(circle,#a855f733,#7b2ce022)}
    /* animations */
    .fade-in{animation:fadeInUp .8s ease both}
    @keyframes fadeInUp{from{opacity:0;transform:translateY(18px)}to{opacity:1;transform:none}}
    @media (max-width:720px){h1{font-size:44px}.qr-img{width:200px;height:200px}}
  </style>
</head>
<body>
  <div class="wrap">
    <div class="glow g1"></div>
    <div class="glow g2"></div>

    <div class="card fade-in" role="main">
      <h1>Ride With Ree</h1>
      <p class="tag">Your journey, our priority</p>

      <div class="qr-frame">
        <div class="qr-inner">
          <div class="schedule">
            <svg width="18" height="18" viewBox="0 0 24 24" fill="none"><path d="M8 7V3" stroke="#E9D9FF" stroke-width="1.6" stroke-linecap="round" stroke-linejoin="round"/><path d="M16 7V3" stroke="#E9D9FF" stroke-width="1.6" stroke-linecap="round" stroke-linejoin="round"/><rect x="3" y="7" width="18" height="14" rx="3" stroke="#E9D9FF" stroke-width="1.6"/></svg>
            <div style="color:#E8DFFF;font-weight:600;font-size:13px">Schedule a Ride</div>
          </div>

          <div id="qr-click" style="cursor:pointer;border-radius:12px;display:flex;align-items:center;justify-content:center;padding:6px;">
            <img id="qr-img" class="qr-img" alt="Schedule QR" src=""/>
          </div>

          <p class="small" style="color:#bcd;margin-top:10px">Scan or click to book your ride</p>

          <div class="cta-row">
            <button id="share-qr" class="btn small">Share QR</button>
            <button id="share-link" class="btn ghost small">Share Link</button>
          </div>

          <button id="download-qr" class="btn small" style="margin-top:12px;background:#fff;color:var(--accent-dark);">Download QR</button>
        </div>
      </div>

      <div class="accent-line"></div>

      <!-- driver welcome (visible if driver=true URL param) -->
      <div id="driver-welcome" style="display:none;margin-top:12px">
        <a id="driver-link" href="#"><button class="btn ghost">Welcome Robyn</button></a>
      </div>

    </div>
  </div>

  <div id="popup-root" style="display:none"></div>

<script>
(function(){
  // bookingUrl targets this page with showContact param
  const bookingUrl = window.location.origin + '/home_full.html?showContact=true';
  const qrEndpoint = 'https://api.qrserver.com/v1/create-qr-code/';
  const qrUrl = qrEndpoint + '?size=400x400&data=' + encodeURIComponent(bookingUrl) + '&bgcolor=a855f7&color=ffffff&format=png&ecc=H';
  const qrImg = document.getElementById('qr-img');
  const qrClick = document.getElementById('qr-click');
  const shareQrBtn = document.getElementById('share-qr');
  const shareLinkBtn = document.getElementById('share-link');
  const downloadBtn = document.getElementById('download-qr');
  const popupRoot = document.getElementById('popup-root');
  const driverWelcome = document.getElementById('driver-welcome');

  qrImg.src = qrUrl;

  function showPopup(){
    popupRoot.innerHTML = '';
    popupRoot.style.display = 'block';
    const backdrop = document.createElement('div'); backdrop.className='backdrop';
    const popup = document.createElement('div'); popup.className='popup';

    popup.innerHTML = '<div style="text-align:center"><svg width="36" height="36" viewBox="0 0 24 24" fill="none"><path d="M3 12h18" stroke="#fff" stroke-width="1.4" stroke-linecap="round"/></svg></div>'+
      '<h3>Contact Us to Book</h3><p class="muted">Call or text to schedule</p>'+
      '<div style="margin-top:12px;display:flex;flex-direction:column;gap:8px">'+
      '<button class="btn" style="background:linear-gradient(90deg,#7b2ce0,#a855f7);" onclick="window.open(\'tel:+19134280140\')">Call (913) 428-0140</button>'+
      '<button class="btn ghost" style="background:#1d3a6e;color:#fff" onclick="window.open(\'sms:+19134280140\')">Text (913) 428-0140</button>'+
      '</div>'+
      '<button style="margin-top:12px;padding:9px;border-radius:8px;width:100%;background:transparent;border:1px solid rgba(255,255,255,0.08);color:#cfe" onclick="closePopup()">Close</button>';

    backdrop.appendChild(popup);
    popupRoot.appendChild(backdrop);
    window.closePopup = function(){ popupRoot.innerHTML=''; popupRoot.style.display='none'; }
  }

  // open popup automatically if URL param present
  const params = new URLSearchParams(window.location.search);
  if(params.get('showContact') === 'true'){
    showPopup();
    window.history.replaceState({}, '', '/home_full.html');
  }

  // simulate auth role: if ?driver=true show driver welcome
  if(params.get('driver') === 'true'){
    driverWelcome.style.display='block';
    document.getElementById('driver-link').href = '/driver/dashboard';
  }

  qrClick.addEventListener('click', function(e){ e.preventDefault(); showPopup(); });

  shareQrBtn.addEventListener('click', async ()=>{
    const highRes = qrEndpoint + '?size=800x800&data=' + encodeURIComponent(bookingUrl) + '&bgcolor=a855f7&color=ffffff&format=png&ecc=H';
    try{
      if(navigator.share){ await navigator.share({title:'Ride With Ree - QR',text:'Scan to book your ride',url:bookingUrl}); toast('Shared'); }
      else if(navigator.clipboard){ await navigator.clipboard.writeText(bookingUrl); toast('Link copied to clipboard'); }
      else toast('Share not available');
    }catch(e){ toast('Share failed') }
  });

  shareLinkBtn.addEventListener('click', async ()=>{
    const link = window.location.origin + '/CustomerBooking';
    try{
      if(navigator.share){ await navigator.share({title:'Ride With Ree',text:'Schedule a ride',url:link}); toast('Shared'); }
      else if(navigator.clipboard){ await navigator.clipboard.writeText(link); toast('Link copied to clipboard'); }
      else toast('Share not available');
    }catch(e){ toast('Share failed') }
  });

  downloadBtn.addEventListener('click', async ()=>{
    try{
      const highRes = qrEndpoint + '?size=1200x1200&data=' + encodeURIComponent(bookingUrl) + '&bgcolor=a855f7&color=ffffff&format=png&ecc=H';
      const r = await fetch(highRes);
      const b = await r.blob();
      const url = URL.createObjectURL(b);
      const a = document.createElement('a'); a.href = url; a.download = 'Hyperwebdesignz-QRCode.png'; document.body.appendChild(a); a.click(); a.remove(); URL.revokeObjectURL(url);
      toast('QR Code downloaded');
    }catch(e){ toast('Download failed') }
  });

  // small toast implementation
  function toast(msg){
    const t = document.createElement('div'); t.textContent = msg; t.style.position='fixed'; t.style.bottom='20px'; t.style.left='50%'; t.style.transform='translateX(-50%)'; t.style.background='rgba(15,20,40,0.9)'; t.style.color='#fff'; t.style.padding='10px 14px'; t.style.borderRadius='10px'; t.style.zIndex=9999; document.body.appendChild(t);
    setTimeout(()=>{ t.style.transition='opacity 300ms'; t.style.opacity='0'; setTimeout(()=>t.remove(),300); },1600);
  }

})();
</script>
</body>
</html>